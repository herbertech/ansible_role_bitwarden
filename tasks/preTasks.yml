- name: Create docker group
  group:
    name: docker
    state: present

- name: Create Bitwarden user
  user:
    name: bitwarden
    uid: '1001'
    groups: docker
    password: Password123
    append: yes

- name: Create Bitwarden directory
  file:
    path: /opt/bitwarden
    state: directory
    mode: '770'
    owner: bitwarden
    group: bitwarden

- name: Create bwdata tmp directory
  file:
    path: /tmp/bwdata
    state: directory
    mode: '755'
    owner: bitwarden
    group: bitwarden


- name: Create bwdata ssl subdirectory
  file:
    path: "/tmp/bwdata/ssl/{{ bitwarden_hostname }}"
    state: directory
    mode: '755'
    owner: bitwarden
    group: bitwarden
